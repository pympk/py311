2025-05-11 21:09:20,702 - INFO - Logging initialized. Log file: logs\backtest_run_20250511_210920.log
2025-05-11 21:09:20,713 - INFO - Script execution started at: 2025-05-11 21:09:20
2025-05-11 21:09:20,715 - INFO - Python Interpreter: c:\Users\ping\Files_win10\python\py311\.venv\Scripts\python.exe
2025-05-11 21:09:20,717 - INFO - Current Working Directory: c:\Users\ping\Files_win10\python\py311\stocks\notebooks
2025-05-11 21:09:20,721 - INFO - Pandas Version: 2.2.3
2025-05-11 21:09:20,721 - INFO - Numpy Version: 1.26.4
2025-05-11 21:09:20,721 - INFO - Attempting to load price data from: c:\Users\ping\Files_win10\python\py311\stocks\notebooks\df_adj_close.parquet
2025-05-11 21:09:21,036 - INFO - Successfully loaded and prepared price data from df_adj_close.parquet
2025-05-11 21:09:21,038 - INFO - Price data shape: (319, 1544), Date range: 2024-02-01 00:00:00 to 2025-05-09 00:00:00
2025-05-11 21:09:21,039 - INFO - Price data loading completed.
2025-05-11 21:09:21,039 - INFO - Attempting to find file pairs in: c:\Users\ping\Files_win10\python\py311\stocks\notebooks\output\selection_results
2025-05-11 21:09:21,047 - INFO - Found 1 potential selection files (.parquet)
2025-05-11 21:09:21,050 - INFO - Found 1 potential parameter files (.json)
2025-05-11 21:09:21,050 - INFO - 
--- Found 1 Paired Data and Parameter Files ---
2025-05-11 21:09:21,056 - INFO - File pairing completed.
2025-05-11 21:09:21,059 - INFO - Starting processing for 1 file pairs...
2025-05-11 21:09:21,062 - INFO - 
--- Processing Pair 1/1: Data='2025-04-25_my_selection_run_1.parquet', Params='2025-04-25_my_selection_run_1_params.json' ---
2025-05-11 21:09:21,066 - INFO - Processing for extracted date: 2025-04-25
2025-05-11 21:09:21,069 - INFO - Parameters loaded from 2025-04-25_my_selection_run_1_params.json:
2025-05-11 21:09:21,072 - INFO - 
{'filter_max_debt_eq': 1.5,
 'filter_min_avg_volume_m': 2.0,
 'filter_min_price': 10.0,
 'filter_min_roe_pct': 5.0,
 'inv_vol_col_name': 'ATR/Price %',
 'n_select_actual': 10,
 'n_select_requested': 10,
 'score_weight_change': 0.35,
 'score_weight_rel_volume': 0.2,
 'score_weight_rsi': 0.35,
 'score_weight_volatility': 0.1}

2025-05-11 21:09:21,095 - INFO - Successfully extracted weights for scheme: EW (10 tickers) for date 2025-04-25
2025-05-11 21:09:21,100 - INFO - Successfully extracted weights for scheme: IV (10 tickers) for date 2025-04-25
2025-05-11 21:09:21,103 - INFO - Successfully extracted weights for scheme: SW (10 tickers) for date 2025-04-25
2025-05-11 21:09:21,103 - INFO - Successfully extracted 3 setup(s) for 2025-04-25.
2025-05-11 21:09:21,103 - INFO - Running backtests for date: 2025-04-25
2025-05-11 21:09:21,115 - INFO - 
===== Starting Batch Backtest Processing =====
2025-05-11 21:09:21,119 - INFO - Prepared global price data copy for backtests.
2025-05-11 21:09:21,121 - INFO - 
Processing date: 2025-04-25
2025-05-11 21:09:21,124 - INFO - ------------------------------
2025-05-11 21:09:21,126 - INFO - Initiating Backtest Run...
2025-05-11 21:09:21,128 - INFO -   Date          : 2025-04-25
2025-05-11 21:09:21,131 - INFO -   Scheme        : EW
2025-05-11 21:09:21,134 - INFO -   Num Tickers   : 10
2025-05-11 21:09:21,134 - INFO -   Selection Date Used: 2025-04-25
2025-05-11 21:09:21,134 - INFO -   Buy Date           : 2025-04-28
2025-05-11 21:09:21,134 - INFO -   Sell Date          : 2025-04-29
2025-05-11 21:09:21,159 - INFO -   Trades Executed: 10/10
2025-05-11 21:09:21,161 - INFO -   Portfolio Return          : 0.0085 (Based on Weight Sum: 1.0000)
2025-05-11 21:09:21,164 - INFO -   Win Rate (Individual)   : 70.00%
2025-05-11 21:09:21,167 - INFO -   Avg Ticker Return       : 0.0085
2025-05-11 21:09:21,173 - INFO -   Std Dev Ticker Return   : 0.0203
2025-05-11 21:09:21,175 - INFO -   Period Sharpe (Indiv)   : 0.4154
2025-05-11 21:09:21,178 - INFO - Backtest simulation for 'EW' on 2025-04-25 completed.
2025-05-11 21:09:21,182 - INFO - ------------------------------
2025-05-11 21:09:21,198 - INFO - ------------------------------
2025-05-11 21:09:21,204 - INFO - Initiating Backtest Run...
2025-05-11 21:09:21,207 - INFO -   Date          : 2025-04-25
2025-05-11 21:09:21,209 - INFO -   Scheme        : IV
2025-05-11 21:09:21,213 - INFO -   Num Tickers   : 10
2025-05-11 21:09:21,219 - INFO -   Selection Date Used: 2025-04-25
2025-05-11 21:09:21,222 - INFO -   Buy Date           : 2025-04-28
2025-05-11 21:09:21,224 - INFO -   Sell Date          : 2025-04-29
2025-05-11 21:09:21,235 - INFO -   Trades Executed: 10/10
2025-05-11 21:09:21,237 - INFO -   Portfolio Return          : 0.0075 (Based on Weight Sum: 1.0000)
2025-05-11 21:09:21,240 - INFO -   Win Rate (Individual)   : 70.00%
2025-05-11 21:09:21,243 - INFO -   Avg Ticker Return       : 0.0085
2025-05-11 21:09:21,244 - INFO -   Std Dev Ticker Return   : 0.0203
2025-05-11 21:09:21,247 - INFO -   Period Sharpe (Indiv)   : 0.4154
2025-05-11 21:09:21,250 - INFO - Backtest simulation for 'IV' on 2025-04-25 completed.
2025-05-11 21:09:21,251 - INFO - ------------------------------
2025-05-11 21:09:21,251 - INFO - ------------------------------
2025-05-11 21:09:21,258 - INFO - Initiating Backtest Run...
2025-05-11 21:09:21,258 - INFO -   Date          : 2025-04-25
2025-05-11 21:09:21,258 - INFO -   Scheme        : SW
2025-05-11 21:09:21,265 - INFO -   Num Tickers   : 10
2025-05-11 21:09:21,269 - INFO -   Selection Date Used: 2025-04-25
2025-05-11 21:09:21,274 - INFO -   Buy Date           : 2025-04-28
2025-05-11 21:09:21,275 - INFO -   Sell Date          : 2025-04-29
2025-05-11 21:09:21,282 - INFO -   Trades Executed: 10/10
2025-05-11 21:09:21,286 - INFO -   Portfolio Return          : 0.0096 (Based on Weight Sum: 1.0000)
2025-05-11 21:09:21,286 - INFO -   Win Rate (Individual)   : 70.00%
2025-05-11 21:09:21,288 - INFO -   Avg Ticker Return       : 0.0085
2025-05-11 21:09:21,289 - INFO -   Std Dev Ticker Return   : 0.0203
2025-05-11 21:09:21,290 - INFO -   Period Sharpe (Indiv)   : 0.4154
2025-05-11 21:09:21,292 - INFO - Backtest simulation for 'SW' on 2025-04-25 completed.
2025-05-11 21:09:21,292 - INFO - ------------------------------
2025-05-11 21:09:21,292 - INFO - 
===== Batch Backtest Processing Finished =====
2025-05-11 21:09:21,292 - INFO - Extracted 3 performance records for this pair.
2025-05-11 21:09:21,292 - INFO - --- Finished processing pair for 2025-04-25. ---
2025-05-11 21:09:21,292 - INFO - --- File processing loop finished. ---
2025-05-11 21:09:21,292 - INFO - 
--- Attempting to Save/Update 3 Performance Records to CSV ---
2025-05-11 21:09:21,341 - INFO - Processed 3 new records. CSV 'logs\backtest_parameter_performance.csv' now contains 3 records (net change: +3).
2025-05-11 21:09:21,343 - INFO - === Script Execution Finished (with errors if reported above) ===
